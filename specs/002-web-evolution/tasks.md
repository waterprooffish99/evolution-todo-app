# Implementation Tasks: Full-Stack Web Evolution (Phase II)

**Feature**: 002-web-evolution
**Branch**: `002-web-evolution`
**Date**: 2026-01-01
**Generated by**: /sp.tasks command

## Overview

This document breaks down Phase II implementation into actionable, testable tasks organized by user story. The implementation creates a full-stack web application with Next.js frontend, FastAPI backend, Neon PostgreSQL database, and Better Auth authentication.

**Total Tasks**: 95
**User Stories**: 5 (US1-P0, US2-P0, US3-P1, US4-P1, US5-P0)
**Estimated Completion**: 12-16 hours

## Task Legend

- `[P]` = Parallelizable (can run concurrently with other [P] tasks in same phase)
- `[US#]` = User Story label (maps to spec.md user stories)
- Task IDs: Sequential (T001, T002, ...)

## Implementation Strategy

**MVP Scope**: Complete US5 (Database) + US1 (Auth) + US3 (API) first
- This provides working backend with authentication and data persistence
- US4 (Frontend) builds on top of working API
- US2 (Isolation) is enforced throughout all user stories

**Incremental Delivery**:
1. Phase 1-2: Setup infrastructure (backend + frontend projects)
2. Phase 3: US5 - Database schema and connection
3. Phase 4: US1 - Authentication (Better Auth + JWT verification)
4. Phase 5: US2 - Identity Law enforcement (foundational)
5. Phase 6: US3 - REST API endpoints
6. Phase 7: US4 - Frontend UI and integration
7. Phase 8: Testing and deployment

---

## Phase 1: Backend Setup

**Goal**: Initialize FastAPI backend project structure with dependencies

**Duration**: 30-45 minutes

### Tasks

- [X] T001 Create backend directory structure (backend/app, backend/tests, backend/alembic)
- [X] T002 Create backend/requirements.txt with FastAPI, SQLModel, python-jose, python-dotenv, alembic, psycopg2-binary, uvicorn
- [X] T003 Create Python virtual environment in backend/.venv
- [X] T004 Install backend dependencies (pip install -r requirements.txt)
- [X] T005 Create backend/.env file with DATABASE_URL, BETTER_AUTH_SECRET, ALLOWED_ORIGINS placeholders
- [X] T006 Create backend/app/__init__.py (empty init file)
- [X] T007 Create backend/app/api/__init__.py (empty init file)
- [X] T008 Create backend/.gitignore to exclude .venv, .env, __pycache__

**Acceptance**:
- backend/ directory exists with proper structure
- Python dependencies installed successfully
- Virtual environment activated
- .env file ready for configuration

---

## Phase 2: Frontend Setup

**Goal**: Initialize Next.js 16+ frontend project with Better Auth

**Duration**: 30-45 minutes

### Tasks

- [X] T009 [P] Create Next.js 16+ app with TypeScript and App Router in frontend/ directory
- [X] T010 [P] Install Better Auth and jose dependencies (npm install better-auth jose)
- [X] T011 [P] Create frontend/.env.local with NEXT_PUBLIC_API_URL, BETTER_AUTH_SECRET, BETTER_AUTH_URL
- [X] T012 [P] Create frontend/lib directory for shared utilities
- [X] T013 [P] Create frontend/components directory for React components
- [X] T014 Verify Next.js dev server runs (npm run dev)

**Acceptance**:
- frontend/ directory with Next.js 16+ project
- Dependencies installed
- Environment variables configured
- Dev server runs on port 3000

**Parallel Opportunities**: All tasks T009-T013 can run concurrently

---

## Phase 3: US5 - Database Persistence (P0)

**User Story**: As a system, I want all task data to be persisted in a PostgreSQL database so that data is durable and scalable.

**Independent Test Criteria**:
- Database tables created (users, tasks)
- Can insert/query tasks via SQLModel
- Foreign key constraints enforced
- Data persists across backend restarts

**Duration**: 60-90 minutes

### Tasks

#### 3A: Database Models

- [X] T015 [P] [US5] Create backend/app/models.py and implement User SQLModel schema with fields from data-model.md
- [X] T016 [P] [US5] Implement Task SQLModel schema in backend/app/models.py with user_id foreign key
- [X] T017 [US5] Add SQLModel relationships (User.tasks, Task.user) in backend/app/models.py

#### 3B: Database Connection

- [X] T018 [US5] Create backend/app/database.py with Neon PostgreSQL connection using SQLModel engine
- [X] T019 [US5] Implement create_db_and_tables() function in backend/app/database.py
- [X] T020 [US5] Implement get_session() dependency in backend/app/database.py for FastAPI
- [X] T021 [US5] Configure connection pooling (pool_size=5, max_overflow=10, pool_pre_ping=True)

#### 3C: Database Initialization

- [X] T022 [US5] Initialize Alembic in backend/ directory (alembic init alembic)
- [X] T023 [US5] Configure alembic/env.py to use SQLModel metadata and DATABASE_URL from .env
- [X] T024 [US5] Generate initial migration for User and Task tables (alembic revision --autogenerate -m "Initial schema")
- [X] T025 [US5] Apply migration to Neon database (alembic upgrade head)
- [X] T026 [US5] Verify tables created in Neon console (users, tasks with correct columns)

**Acceptance**:
- SQLModel schemas defined for User and Task
- Database connection established with Neon
- Alembic migrations working
- Tables exist in database with foreign key constraints

**Dependencies**: Phase 1 (backend setup)

**Parallel Opportunities**: Tasks T015-T016 can run in parallel

---

## Phase 4: US1 - User Authentication & Authorization (P0)

**User Story**: As a user, I want to sign up and log in securely so that my tasks are private and only accessible to me.

**Independent Test Criteria**:
- JWT tokens generated by Better Auth
- Backend verifies JWT signature correctly
- Invalid/missing JWT returns 401 Unauthorized
- JWT contains user_id claim

**Duration**: 90-120 minutes

### Tasks

#### 4A: Backend JWT Verification

- [X] T027 [US1] Create backend/app/auth.py with imports for python-jose and FastAPI security
- [X] T028 [US1] Implement verify_token() function in backend/app/auth.py that verifies JWT with BETTER_AUTH_SECRET
- [X] T029 [US1] Extract user_id from verified JWT payload in verify_token()
- [X] T030 [US1] Raise HTTPException(401) for invalid/expired JWT in verify_token()
- [X] T031 [US1] Create HTTPBearer security scheme instance in backend/app/auth.py

#### 4B: Frontend Better Auth Setup

- [X] T032 [P] [US1] Create frontend/lib/auth.ts and configure BetterAuth with secret and database URL
- [X] T033 [P] [US1] Create frontend/app/api/auth/[...all]/route.ts with Better Auth Next.js handler
- [X] T034 [P] [US1] Create frontend/lib/auth-context.tsx with React Context for auth state (user, token)
- [X] T035 [US1] Implement login() and logout() functions in auth-context.tsx
- [X] T036 [US1] Add AuthProvider to frontend/app/layout.tsx wrapping children

#### 4C: Login/Signup UI

- [X] T037 [P] [US1] Create frontend/app/login/page.tsx with login form (email, password)
- [X] T038 [P] [US1] Create frontend/app/signup/page.tsx with signup form (email, password, confirm password)
- [X] T039 [US1] Implement form submission in login page that calls Better Auth login API
- [X] T040 [US1] Implement form submission in signup page that calls Better Auth signup API
- [X] T041 [US1] Store JWT token in localStorage after successful login
- [X] T042 [US1] Create frontend/components/AuthGuard.tsx to protect dashboard route

**Acceptance**:
- Backend can verify JWT tokens (returns user_id or raises 401)
- Frontend has Better Auth configured
- Users can sign up and log in
- JWT token stored in localStorage
- Dashboard protected (redirects to login if not authenticated)

**Dependencies**: Phase 3 (database must exist for Better Auth user storage)

**Parallel Opportunities**: Tasks T032-T034, T037-T038 can run in parallel

---

## Phase 5: US2 - Multi-Tenant Task Isolation (P0)

**User Story**: As a user, I want to ensure that only I can see and modify my tasks, and no other user can access my data.

**Independent Test Criteria**:
- User A creates tasks, User B cannot see them
- Attempting to access another user's task returns 404
- All database queries filter by authenticated user_id
- URL user_id mismatch returns 403

**Duration**: 45-60 minutes

**Note**: This is enforced across all API endpoints, so tasks are integrated into Phase 6 (US3).

### Tasks

#### 5A: Identity Law Helpers

- [X] T043 [US2] Create check_user_authorization() helper in backend/app/auth.py to validate URL user_id matches JWT user_id
- [X] T044 [US2] Implement HTTPException(403, "Forbidden") when user_id mismatch detected
- [X] T045 [US2] Add docstring explaining The Identity Law to backend/app/auth.py

#### 5B: Testing Identity Law

- [X] T046 [P] [US2] Write test for verify_token() in backend/tests/test_auth.py
- [X] T047 [P] [US2] Write test for check_user_authorization() with matching user_ids
- [X] T048 [P] [US2] Write test for check_user_authorization() with mismatched user_ids (should raise 403)

**Acceptance**:
- Authorization helper function implemented
- User_id matching enforced
- Tests verify 403 response for mismatched user_ids

**Dependencies**: Phase 4 (JWT verification must be implemented)

**Parallel Opportunities**: Tasks T046-T048 can run in parallel

---

## Phase 6: US3 - RESTful Task API (P1)

**User Story**: As a frontend developer, I want a consistent RESTful API to manage tasks so that I can build a responsive user interface.

**Independent Test Criteria**:
- GET /api/{user_id}/tasks returns all user's tasks
- POST creates task with 201 Created
- PUT updates task with 200 OK
- DELETE removes task with 204 No Content
- PATCH toggles completion with 200 OK
- All endpoints enforce The Identity Law

**Duration**: 120-150 minutes

### Tasks

#### 6A: Adapted Phase I Skills

- [X] T049 [P] [US3] Create backend/app/skills.py with imports for SQLModel, Session, Task model
- [X] T050 [P] [US3] Implement create_task(user_id, title, description, db) adapted from Phase I AddTask
- [X] T051 [P] [US3] Implement get_user_tasks(user_id, db) adapted from Phase I GetTasks with user_id filter
- [X] T052 [P] [US3] Implement update_task(task_id, user_id, title, description, db) adapted from Phase I UpdateTask
- [X] T053 [P] [US3] Implement delete_task(task_id, user_id, db) adapted from Phase I DeleteTask
- [X] T054 [P] [US3] Implement toggle_task_status(task_id, user_id, db) adapted from Phase I ToggleTaskStatus
- [X] T055 [US3] Add Identity Law enforcement to all skills (filter by user_id, raise 404 if not found)

#### 6B: Pydantic Request/Response Models

- [X] T056 [P] [US3] Create TaskCreate Pydantic model in backend/app/api/tasks.py with title/description validation
- [X] T057 [P] [US3] Create TaskUpdate Pydantic model in backend/app/api/tasks.py
- [X] T058 [P] [US3] Add title whitespace validation to TaskCreate and TaskUpdate models

#### 6C: API Endpoints

- [X] T059 [US3] Create backend/app/api/tasks.py with APIRouter and /api/{user_id}/tasks prefix
- [X] T060 [US3] Implement GET /api/{user_id}/tasks endpoint calling get_user_tasks skill
- [X] T061 [US3] Implement POST /api/{user_id}/tasks endpoint calling create_task skill (201 status)
- [X] T062 [US3] Implement PUT /api/{user_id}/tasks/{task_id} endpoint calling update_task skill
- [X] T063 [US3] Implement DELETE /api/{user_id}/tasks/{task_id} endpoint calling delete_task skill (204 status)
- [X] T064 [US3] Implement PATCH /api/{user_id}/tasks/{task_id}/complete endpoint calling toggle_task_status skill
- [X] T065 [US3] Add verify_token dependency to all endpoints for JWT verification
- [X] T066 [US3] Add check_user_authorization calls to all endpoints (enforce URL user_id == JWT user_id)

#### 6D: FastAPI Main App

- [X] T067 [US3] Create backend/app/main.py with FastAPI app initialization
- [X] T068 [US3] Add CORS middleware to backend/app/main.py with ALLOWED_ORIGINS from .env
- [X] T069 [US3] Include tasks router in main.py (app.include_router(tasks_router))
- [X] T070 [US3] Add /health endpoint returning status and timestamp
- [X] T071 [US3] Add startup event to create database tables (call create_db_and_tables)

**Acceptance**:
- All 5 REST API endpoints implemented
- Phase I skills adapted to SQLModel with user_id filtering
- JWT verification on all endpoints
- Identity Law enforced (403 for user_id mismatch)
- CORS configured for Next.js frontend
- Backend server runs on port 8000

**Dependencies**:
- Phase 3 (database models)
- Phase 4 (JWT verification)
- Phase 5 (Identity Law helpers)

**Parallel Opportunities**: Tasks T049-T054, T056-T058 can run in parallel

---

## Phase 7: US4 - Web Task Management Interface (P1)

**User Story**: As a user, I want a modern web interface to manage my tasks so that I can add, view, update, delete, and complete tasks easily from any device.

**Independent Test Criteria**:
- Task dashboard displays all user's tasks
- Can create task via form
- Can toggle task completion
- Can delete task
- UI updates after each operation

**Duration**: 120-150 minutes

### Tasks

#### 7A: API Client

- [X] T072 [P] [US4] Create frontend/lib/api.ts with Task TypeScript interface
- [X] T073 [P] [US4] Implement apiClient() function with JWT auto-injection from localStorage
- [X] T074 [P] [US4] Handle 401 responses in apiClient by redirecting to /login
- [X] T075 [US4] Implement taskApi.getAll(userId) method calling GET /api/{user_id}/tasks
- [X] T076 [US4] Implement taskApi.create(userId, data) method calling POST /api/{user_id}/tasks
- [X] T077 [US4] Implement taskApi.update(userId, taskId, data) method calling PUT endpoint
- [X] T078 [US4] Implement taskApi.delete(userId, taskId) method calling DELETE endpoint
- [X] T079 [US4] Implement taskApi.toggleComplete(userId, taskId) method calling PATCH endpoint

#### 7B: Task Components

- [X] T080 [P] [US4] Create frontend/components/TaskItem.tsx displaying single task with checkbox and delete button
- [X] T081 [P] [US4] Create frontend/components/TaskForm.tsx with title and description inputs
- [X] T082 [P] [US4] Create frontend/components/TaskList.tsx displaying array of TaskItem components
- [X] T083 [US4] Add onClick handler to TaskItem checkbox calling taskApi.toggleComplete
- [X] T084 [US4] Add onClick handler to TaskItem delete button calling taskApi.delete
- [X] T085 [US4] Add onSubmit handler to TaskForm calling taskApi.create

#### 7C: Dashboard Page

- [X] T086 [US4] Create frontend/app/dashboard/page.tsx as client component
- [X] T087 [US4] Implement useEffect to load tasks on mount (call taskApi.getAll)
- [X] T088 [US4] Add useState for tasks array and loading state
- [X] T089 [US4] Render TaskForm component for creating new tasks
- [X] T090 [US4] Render TaskList component passing tasks array
- [X] T091 [US4] Add AuthGuard wrapper to protect dashboard route
- [X] T092 [US4] Implement task refresh after create/update/delete operations
- [X] T093 [US4] Add error handling and display for API failures

#### 7D: Styling

- [X] T094 [P] [US4] Style TaskItem component with Tailwind CSS (checkbox, strikethrough for completed)
- [X] T095 [P] [US4] Style TaskForm component with Tailwind CSS (input fields, submit button)
- [X] T096 [P] [US4] Style dashboard page layout with Tailwind CSS (container, spacing)

**Acceptance**:
- API client implemented with JWT injection
- Task components created and styled
- Dashboard page functional with CRUD operations
- UI updates correctly after each operation
- Error handling displays user-friendly messages

**Dependencies**:
- Phase 6 (API endpoints must be working)
- Phase 4 (authentication must be working)

**Parallel Opportunities**: Tasks T072-T074, T080-T082, T094-T096 can run in parallel

---

## Phase 8: Integration & Testing

**Goal**: Write comprehensive tests and verify all requirements met

**Duration**: 90-120 minutes

### Tasks

#### 8A: Backend Tests

- [ ] T097 [P] Create backend/tests/conftest.py with pytest fixtures (test_db, test_client)
- [ ] T098 [P] Write backend/tests/test_auth.py testing JWT verification (valid token, invalid token, expired token)
- [ ] T099 [P] Write backend/tests/test_skills.py testing adapted Phase I skills with SQLModel
- [ ] T100 [P] Write backend/tests/test_api_tasks.py testing GET /tasks endpoint with valid JWT
- [ ] T101 [P] Write test for POST /tasks endpoint (201 Created response)
- [ ] T102 [P] Write test for PUT /tasks/{id} endpoint (200 OK response)
- [ ] T103 [P] Write test for DELETE /tasks/{id} endpoint (204 No Content)
- [ ] T104 [P] Write test for PATCH /tasks/{id}/complete endpoint (200 OK)
- [ ] T105 [P] Write test for 401 Unauthorized (missing JWT)
- [ ] T106 [P] Write test for 403 Forbidden (user_id mismatch)
- [ ] T107 [P] Write test for 404 Not Found (task doesn't exist or wrong user)
- [ ] T108 Run full backend test suite (pytest backend/tests -v)

#### 8B: Multi-Tenant Isolation Tests

- [ ] T109 [US2] Write integration test: User A creates tasks, User B cannot see them
- [ ] T110 [US2] Write integration test: User A cannot access User B's task by ID
- [ ] T111 [US2] Write integration test: User A cannot update User B's task
- [ ] T112 [US2] Write integration test: User A cannot delete User B's task
- [ ] T113 [US2] Verify all isolation tests pass (The Identity Law enforced)

#### 8C: End-to-End Tests

- [ ] T114 [P] Install Playwright in frontend (npm install -D @playwright/test)
- [ ] T115 [P] Create frontend/tests/e2e/auth.spec.ts testing signup → login flow
- [ ] T116 [P] Create frontend/tests/e2e/tasks.spec.ts testing full task CRUD workflow
- [ ] T117 [P] Write E2E test for multi-user isolation (two different users, separate task lists)
- [ ] T118 Run Playwright tests (npx playwright test)

**Acceptance**:
- All backend tests pass (auth, skills, API endpoints)
- Multi-tenant isolation verified with integration tests
- E2E tests verify complete user journeys
- The Identity Law enforcement confirmed

**Dependencies**: All previous phases (need working backend + frontend)

**Parallel Opportunities**: All test writing tasks can run in parallel (T097-T107, T114-T117)

---

## Phase 9: Documentation & Polish

**Goal**: Complete documentation, API docs, and final verification

**Duration**: 30-45 minutes

### Tasks

- [ ] T119 Create backend/README.md with setup instructions and API documentation
- [ ] T120 Create frontend/README.md with setup instructions and component documentation
- [ ] T121 Verify FastAPI auto-generated docs accessible at http://localhost:8000/docs
- [ ] T122 Add inline comments to backend/app/skills.py explaining Phase I → Phase II adaptation
- [ ] T123 Create .env.example files in both backend/ and frontend/ with placeholder values
- [ ] T124 Update root README.md with Phase II architecture overview and running instructions
- [ ] T125 Archive Phase I src/ directory to src-phase-i-archive/

**Acceptance**:
- Documentation complete and accurate
- API docs (Swagger UI) working
- Example .env files provided
- Phase I source code archived

**Dependencies**: All implementation complete

---

## Phase 10: Deployment Preparation

**Goal**: Prepare for production deployment

**Duration**: 45-60 minutes

### Tasks

#### 10A: Backend Deployment

- [ ] T126 [P] Create backend/Dockerfile with Python 3.13 base image
- [ ] T127 [P] Create backend/fly.toml or railway.json for deployment configuration
- [ ] T128 [P] Configure production environment variables in deployment platform
- [ ] T129 Update ALLOWED_ORIGINS to production frontend URL

#### 10B: Frontend Deployment

- [ ] T130 [P] Create frontend/vercel.json with environment variable configuration
- [ ] T131 [P] Update NEXT_PUBLIC_API_URL to production backend URL
- [ ] T132 [P] Configure BETTER_AUTH_SECRET in Vercel environment variables

#### 10C: Database

- [ ] T133 Create Neon production branch from main
- [ ] T134 Run Alembic migrations on production database
- [ ] T135 Verify database schema matches development

**Acceptance**:
- Deployment configurations created
- Environment variables configured for production
- Database migrations ready for production

**Dependencies**: All testing complete

**Parallel Opportunities**: Tasks T126-T128, T130-T132 can run in parallel

---

## Dependency Graph

**User Story Completion Order**:

```
Phase 1 (Backend Setup) ──┐
                          ├──→ Phase 3: US5 (Database) ← FOUNDATIONAL
Phase 2 (Frontend Setup) ─┘           ↓
                                Phase 4: US1 (Auth) ← FOUNDATIONAL
                                      ↓
                                Phase 5: US2 (Identity Law) ← FOUNDATIONAL
                                      ↓
                                Phase 6: US3 (REST API)
                                      ↓
                                Phase 7: US4 (Frontend UI)
                                      ↓
                                Phase 8 (Testing)
                                      ↓
                                Phase 9 (Docs)
                                      ↓
                                Phase 10 (Deployment)
```

**Critical Path**: 1 → 3 → 4 → 5 → 6 → 7 → 8 → 9 → 10

**Foundational (Must Complete First)**:
- US5 (Database): Required by all user stories
- US1 (Auth): Required by API and frontend
- US2 (Identity Law): Enforced across all endpoints

**Independent After Foundational**:
- US3 (API): Can proceed once US5, US1, US2 complete
- US4 (Frontend): Can proceed once US3 has working API

---

## Parallel Execution Examples

### Phase 3 (US5) - Database Setup

**Group A** (Models - can run simultaneously):
```
T015: Create User SQLModel schema
T016: Create Task SQLModel schema
```

### Phase 4 (US1) - Authentication

**Group A** (Backend auth - simultaneous):
```
T027-T031: Implement backend JWT verification
```

**Group B** (Frontend auth - simultaneous):
```
T032: Configure Better Auth
T033: Create auth API route
T034: Create auth context
```

**Group C** (UI - simultaneous):
```
T037: Create login page
T038: Create signup page
```

### Phase 6 (US3) - API Implementation

**Group A** (Skills - all independent):
```
T050: create_task skill
T051: get_user_tasks skill
T052: update_task skill
T053: delete_task skill
T054: toggle_task_status skill
```

**Group B** (Validation models - simultaneous):
```
T056: TaskCreate model
T057: TaskUpdate model
T058: Validation logic
```

### Phase 7 (US4) - Frontend UI

**Group A** (API client - simultaneous):
```
T072: Create api.ts
T073: Implement apiClient
T074: Handle 401 errors
```

**Group B** (Components - simultaneous):
```
T080: TaskItem component
T081: TaskForm component
T082: TaskList component
```

**Group C** (Styling - simultaneous):
```
T094: Style TaskItem
T095: Style TaskForm
T096: Style dashboard
```

### Phase 8 (Testing) - All Tests in Parallel

**All test writing tasks (T097-T117) can run simultaneously**

---

## MVP Scope Recommendation

**Minimum Viable Product** (US5 + US1 + US3 core):
- Phase 1-2: Setup (T001-T014)
- Phase 3: US5 Database (T015-T026)
- Phase 4: US1 Auth (T027-T042)
- Phase 5: US2 Identity Law (T043-T048)
- Phase 6: US3 API (T049-T071)
- Phase 8A: Basic backend tests (T097-T108)

**Total MVP Tasks**: 71 tasks
**Estimated Time**: 8-10 hours

This provides working backend with authentication and API. Frontend (US4) can be added incrementally.

---

## Testing Strategy Summary

**Test Distribution**:
- Backend unit tests: 3 files (test_auth.py, test_skills.py, test_api_tasks.py)
- Backend integration tests: 5 tests (multi-tenant isolation)
- Frontend E2E tests: 3 specs (auth, tasks, isolation)
- Manual testing: API via Swagger UI, frontend workflows

**Coverage Targets**:
- Backend: > 85% coverage
- Frontend: > 70% coverage (UI components)
- API endpoints: 100% coverage (all endpoints tested)

---

## Success Criteria Checklist

Phase II is complete when:

**Backend**:
- [ ] FastAPI server running on port 8000
- [ ] All 5 REST API endpoints functional
- [ ] JWT verification working (401 for invalid tokens)
- [ ] Identity Law enforced (403 for user_id mismatch, 404 for wrong user)
- [ ] Database schema created in Neon
- [ ] Phase I skill logic preserved in adapted skills
- [ ] All backend tests passing

**Frontend**:
- [ ] Next.js app running on port 3000
- [ ] Better Auth configured with login/signup
- [ ] JWT tokens generated and stored
- [ ] Task dashboard displays user's tasks
- [ ] Can create, update, delete, toggle tasks via UI
- [ ] Error handling displays user-friendly messages
- [ ] Protected routes redirect to login

**Security**:
- [ ] No user can access another user's tasks (verified with tests)
- [ ] All API requests require valid JWT
- [ ] CORS configured correctly
- [ ] SQL injection prevented (SQLModel parameterized queries)

**Documentation**:
- [ ] API documentation accessible at /docs
- [ ] README files complete
- [ ] .env.example files provided

---

## Notes

**Task Execution Strategy**:
1. Start with Phase 1-2 (project setup)
2. Implement US5 (database) - foundational
3. Implement US1 (auth) - required for all endpoints
4. Implement US2 (identity law) - security foundation
5. Implement US3 (API) - backend complete
6. Implement US4 (frontend) - UI integration
7. Phase 8-10 (testing, docs, deployment)

**When to Test**:
- After Phase 3: Test database connection and models
- After Phase 4: Test JWT verification
- After Phase 6: Test all API endpoints
- After Phase 7: Test frontend integration
- Phase 8: Comprehensive test suite

**Common Pitfalls to Avoid**:
- Don't skip user_id filtering in database queries (violates Identity Law)
- Don't forget to call check_user_authorization in endpoints
- Don't expose password_hash in API responses
- Don't commit .env files to git (.gitignore them)
- Don't use weak JWT secrets (min 32 characters)
- Don't skip CORS configuration (frontend won't connect)

---

**Generated**: 2026-01-01 | **Feature Branch**: 002-web-evolution | **Command**: /sp.tasks
